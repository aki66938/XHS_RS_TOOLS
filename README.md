# XHS-RS-TOOLS

![License](https://img.shields.io/badge/license-MIT-blue.svg)
![Language](https://img.shields.io/badge/language-Rust%20%7C%20Python-orange.svg)

**[ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨ / For Educational Purposes Only]**

## âš ï¸ å…è´£å£°æ˜ (Disclaimer)

1.  **å­¦ä¹ ç”¨é€”**: æœ¬é¡¹ç›®ä»…ä¾›ç¼–ç¨‹çˆ±å¥½è€…å­¦ä¹  Rust ä¸ Python æ··åˆå¼€å‘ã€é€†å‘åˆ†ææ€è·¯åŠæµè§ˆå™¨è‡ªåŠ¨åŒ–æŠ€æœ¯ä½¿ç”¨ã€‚
2.  **ä¸¥ç¦å•†ç”¨**: ä¸¥ç¦å°†æœ¬é¡¹ç›®ç”¨äºä»»ä½•å•†ä¸šç”¨é€”ã€é»‘ç°äº§æˆ–å…¶ä»–éæ³•ç›®çš„ã€‚
3.  **åæœè‡ªè´Ÿ**: ä½¿ç”¨æœ¬é¡¹ç›®äº§ç”Ÿçš„ä»»ä½•åæœï¼ˆåŒ…æ‹¬ä½†ä¸é™äºè´¦å·å°ç¦ã€æ³•å¾‹è´£ä»»ï¼‰ç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚å¼€å‘è€…ä¸å¯¹ä»»ä½•è¡ç”Ÿä½œå“æˆ–ä½¿ç”¨è¡Œä¸ºè´Ÿè´£ã€‚
4.  **æ¥å£å˜åŠ¨**: é¡¹ç›®åŸºäºç‰¹å®šæ—¶é—´ç‚¹çš„ç›®æ ‡ç½‘ç«™çŠ¶æ€å¼€å‘ï¼Œä¸ä¿è¯é•¿æœŸæœ‰æ•ˆæ€§ã€‚

## ğŸ“– é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº **Rust** (åç«¯ API) å’Œ **Playwright** (å‰ç«¯é‡‡é›†) çš„å°çº¢ä¹¦ API é€†å‘ä¸è‡ªåŠ¨åŒ–å·¥å…·é›†ã€‚

### æ ¸å¿ƒå®ç°é€»è¾‘ (The "Secret Sauce")

å°çº¢ä¹¦ Web ç«¯æ¥å£çš„é£æ§æœºåˆ¶æä¸ºä¸¥æ ¼ï¼Œæ ¸å¿ƒåœ¨äºï¼š**Cookieã€Request Header ä¸ X-S ç­¾åå¼ºç»‘å®š**ã€‚
ç®€å•çš„ç­¾åç”Ÿæˆå¾€å¾€æ— æ³•é€šè¿‡æ ¡éªŒï¼Œå› ä¸ºæœåŠ¡ç«¯ä¼šæ ¡éªŒç­¾åçš„ç”Ÿæˆç¯å¢ƒï¼ˆCookieã€Canvas æŒ‡çº¹ç­‰ï¼‰æ˜¯å¦ä¸è¯·æ±‚å‘èµ·è€…ä¸€è‡´ã€‚

æœ¬é¡¹ç›®é‡‡ç”¨ **Pure Algorithm** (çº¯ç®—æ³•ç­¾å) ç­–ç•¥ï¼š
1.  **è®¿å®¢ Cookie è·å–**: ä½¿ç”¨ Playwright æ— å¤´æ¨¡å¼è®¿é—®ä¸»é¡µï¼Œè·å–åˆæ³•çš„è®¿å®¢ Cookieã€‚
2.  **çº¯ Rust ç™»å½•æµç¨‹**: QR ç åˆ›å»ºã€è½®è¯¢ã€ç™»å½•ç¡®è®¤å…¨éƒ¨ç”± Rust é€šè¿‡å®˜æ–¹ API å®Œæˆã€‚
3.  **å®æ—¶ç­¾å**: Python Agent æä¾› `xhshow` ç®—æ³•ç­¾åæœåŠ¡ï¼Œæ— éœ€æµè§ˆå™¨æ•è·ã€‚
4.  **æŒä¹…åŒ–ä¼šè¯**: ç™»å½•æˆåŠŸå Cookie è‡ªåŠ¨å­˜å‚¨åˆ° MongoDBã€‚
5.  **æ¶æ„ä¼˜åŠ¿**: Playwright ä»…åœ¨é¦–æ¬¡è·å–è®¿å®¢ Cookie æ—¶è¿è¡Œï¼ˆæä½é¢‘ç‡ï¼‰ï¼Œæ—¥å¸¸è¯·æ±‚å®Œå…¨ç”± Rust å¤„ç†ã€‚

## ğŸš€ å½“å‰åŠŸèƒ½ (v1.3.1)

ä»¥ä¸‹å‡ä¸ºç›®å‰å·²å®ç°å¹¶éªŒè¯çš„åŠŸèƒ½ï¼š

*   **çº¯ Rust ç™»å½•æµç¨‹**: QR ç åˆ›å»ºã€çŠ¶æ€è½®è¯¢ã€ç™»å½•ç¡®è®¤å…¨éƒ¨ API åŒ–ï¼Œæ— éœ€æµè§ˆå™¨å­è¿›ç¨‹ã€‚
*   **å…¨é¢‘é“ Feed é‡‡é›†**: æ”¯æŒé¦–é¡µæ¨èåŠæ‰€æœ‰ 10 ä¸ªå­é¢‘é“ï¼ˆç©¿æ­ã€ç¾é£Ÿã€å½©å¦†ã€å½±è§†ã€èŒåœºã€æƒ…æ„Ÿã€å®¶å±…ã€æ¸¸æˆã€æ—…è¡Œã€å¥èº«ï¼‰ã€‚
*   **é€šçŸ¥é¡µé‡‡é›†**: è·å–è¯„è®º/@ã€æ–°å¢å…³æ³¨ã€èµå’Œæ”¶è—ã€‚
*   **å›¾æ–‡è¯¦æƒ…**: è·å–æŒ‡å®šç¬”è®°çš„è¯„è®ºåˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µï¼Œæ”¯æŒåŠ¨æ€å‚æ•°ç­¾åã€‚
*   **å®æ—¶ç­¾å**: Python Agent æä¾› `xhshow` ç®—æ³•å®æ—¶ç­¾åã€‚
*   **é«˜å¯é æ€§**: Playwright è®¿å®¢ Cookie è·å–æ”¯æŒé‡è¯•æœºåˆ¶ï¼ˆæœ€å¤š 3 æ¬¡ï¼‰ã€‚

## ğŸ“… å¼€å‘æ—¥å¿— (Dev Log)

| ç‰ˆæœ¬ | æ—¥æœŸ | æ›´æ–°å†…å®¹ | å¤‡æ³¨ |
| :--- | :--- | :--- | :--- |
| **v1.3.1** | 2026-01-17 | **çº¯ Rust ç™»å½•æµç¨‹é‡æ„** | |
| | | - ğŸš€ **ç™»å½• API åŒ–**: æ–°å¢ `/api/auth/guest-init`ã€`/qrcode/create`ã€`/qrcode/status` | å…¨æµç¨‹ Rust å®ç° |
| | | - ğŸ”§ **Playwright èŒè´£ç®€åŒ–**: ä»…ç”¨äºè·å–åˆå§‹è®¿å®¢ Cookieï¼Œæ— éœ€æµè§ˆå™¨å­è¿›ç¨‹ | æ¶æ„æ›´æ¸…æ™° |
| | | - ğŸ”„ **é‡è¯•æœºåˆ¶**: è®¿å®¢ Cookie è·å–æ”¯æŒæœ€å¤š 3 æ¬¡é‡è¯•ï¼Œè¶…æ—¶å®¹é”™å¢å¼º | æé«˜å¯é æ€§ |
| **v1.3.0** | 2026-01-16 | **æ¶æ„é‡æ„ä¸æ¥å£è¡¥å…¨** | |
| | | - ğŸ—ï¸ **çº¯ç®—æ³•æ¶æ„è¿ç§»**: ç§»é™¤ Playwright ç­¾åä¾èµ–ï¼Œå…¨é¢è½¬å‘ Python Agent å®æ—¶ç­¾å | æ€§èƒ½å¤§å¹…æå‡ï¼Œä¾èµ–å‡å°‘ |
| | | - ğŸ› **ä¿®å¤ 406 é”™è¯¯**: ä¿®æ­£ Notifications æ¥å£çš„ç­¾åå‚æ•°å¤„ç†é€»è¾‘ | è§£å†³äº†æ¥å£è°ƒç”¨å¤±è´¥é—®é¢˜ |
| | | - ğŸ‰ **æ–°å¢æ¥å£**: èµå’Œæ”¶è—é€šçŸ¥ (`/api/notification/likes`) | |
| | | - ğŸ¤– **Agent ç®¡ç†**: Rust æœåŠ¡è‡ªåŠ¨ç®¡ç† Python Agent ç”Ÿå‘½å‘¨æœŸ | ä¸€é”®å¯åŠ¨ |
| **v1.2.0** | 2026-01-16 | **æ–°å¢ç«¯ç‚¹ä¸ä»£ç ä¼˜åŒ–** | |
| | | - ğŸ‰ æ–°å¢ `/api/auth/qrcode-status` | å®æ—¶æŸ¥è¯¢æ‰«ç ç™»å½•çŠ¶æ€ |
| | | - ğŸ› ä¿®å¤ Python è„šæœ¬ UTF-8 ç¼–ç é—®é¢˜ | |
| **v1.1.0** | 2026-01-15 | **æ–°å¢æ¥å£ä¸æ¨¡å—é‡æ„** | |
| | | - âœ¨ æ–°å¢é€šçŸ¥é¡µé‡‡é›†: `/api/notification/mentions` å’Œ `/connections` | |
| | | - âœ¨ æ–°å¢å›¾æ–‡è¯¦æƒ…: `/api/note/page` | |
| | | - â™»ï¸ é‡æ„ API å…¬å…±æ¨¡å—ï¼Œç»Ÿä¸€è¯·æ±‚å¤„ç†é€»è¾‘ | |

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æœåŠ¡
åªéœ€è¿è¡Œ Rust æœåŠ¡ï¼Œå®ƒä¼šè‡ªåŠ¨å¯åŠ¨ Python Agentï¼š
```bash
cargo run
```

### 2. è¿è¡Œæµ‹è¯•
```bash
python client_demo.py
```

## ğŸ”Œ å·²éªŒè¯ API åˆ—è¡¨ (Implemented APIs)

| Category | Endpoint | Status | Description |
| :--- | :--- | :--- | :--- |
| **Auth** | `/api/auth/guest-init` | âœ… | **[NEW]** è·å–è®¿å®¢ Cookie (Playwright) |
| **Auth** | `/api/auth/qrcode/create` | âœ… | **[NEW]** åˆ›å»ºç™»å½•äºŒç»´ç  |
| **Auth** | `/api/auth/qrcode/status` | âœ… | **[NEW]** è½®è¯¢ç™»å½•çŠ¶æ€ |
| **User** | `/api/user/me` | âœ… | è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯ |
| **Search** | `/api/search/trending` | âœ… | è·å–çƒ­æœæ¨èè¯ |
| **Feed** | `/api/feed/homefeed/{category}` | âœ… | 10 ä¸ªå‚ç›´é¢‘é“ |
| **Notification** | `/api/notification/mentions` | âœ… | è·å–è¯„è®ºå’Œ @ é€šçŸ¥ |
| **Notification** | `/api/notification/connections` | âœ… | è·å–æ–°å¢å…³æ³¨é€šçŸ¥ |
| **Notification** | `/api/notification/likes` | âœ… | è·å–èµå’Œæ”¶è—é€šçŸ¥ |
| **Note** | `/api/note/page` | âœ… | è·å–ç¬”è®°è¯„è®º |

## ğŸ“š æ¥å£æ–‡æ¡£ (API Docs)

æœ¬é¡¹ç›®å†…ç½® Swagger UIï¼Œå¯åŠ¨æœåŠ¡åå³å¯è®¿é—®ï¼š
- **åœ°å€**: `http://localhost:3005/swagger-ui/`
- **ä½¿ç”¨**: å¯åœ¨ç½‘é¡µä¸Šç›´æ¥å‘èµ·è¯·æ±‚æµ‹è¯•æ¥å£ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…è‡ªè¿° (Author's Note)

### é¡¹ç›®èµ·æºä¸è½¬å‹
æœ¬é¡¹ç›®çš„çµæ„Ÿæ¥æºäºæˆ‘å¯¹ **RPA (Robotic Process Automation)** æŠ€æœ¯åŠæµè§ˆå™¨è‡ªåŠ¨åŒ–æ§åˆ¶çš„æ·±å…¥ç ”ç©¶ã€‚
åœ¨å‰ä½œ `xhs_tools` (1.1k stars) çš„ç»´æŠ¤è¿‡ç¨‹ä¸­ï¼Œæˆ‘æ·±åˆ»ä½“ä¼šåˆ°å•çº¯ä¾èµ– Python è„šæœ¬è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œçš„å±€é™æ€§ã€‚éšç€ AI æŠ€æœ¯ï¼ˆç‰¹åˆ«æ˜¯åƒ Google Gemini è¿™æ ·å…·å¤‡å¼ºå¤§æµè§ˆå™¨ç†è§£èƒ½åŠ›çš„æ¨¡å‹ï¼‰çš„å´›èµ·ï¼Œä¼ ç»Ÿçš„ç¡¬ç¼–ç è‡ªåŠ¨åŒ–æ­£åœ¨è¢«æ™ºèƒ½ä»£ç†æ‰€å–ä»£ã€‚

å› æ­¤ï¼Œæˆ‘å†³å®šæš‚åœæ—§é¡¹ç›®çš„æ›´æ–°ï¼Œè½¬å‘æ¢ç´¢æ¶æ„æ›´å…ˆè¿›ã€æ€§èƒ½æ›´å¼ºåŠ²çš„è§£å†³æ–¹æ¡ˆï¼š
*   **æ¶æ„å‡çº§**: æ ¸å¿ƒç½‘ç»œå±‚é‡‡ç”¨ **Rust** é‡å†™ï¼Œç¡®ä¿æé«˜çš„å¹¶å‘æ€§èƒ½ä¸ç±»å‹å®‰å…¨ã€‚
*   **è‡ªåŠ¨åŒ–åŸºåº§**: ä¿ç•™ Python (Playwright) ä½œä¸ºæµè§ˆå™¨æ§åˆ¶å±‚ï¼Œä¸“æ³¨äºå¤„ç†å¤æ‚çš„ DOM äº¤äº’ä¸äººæœºéªŒè¯ã€‚
*   **API åŒ–**: å°†æ‰€æœ‰åŠŸèƒ½å°è£…ä¸ºæ ‡å‡† HTTP æ¥å£ï¼Œä¸ºæœªæ¥æ¥å…¥ AI Agent æˆ–å…¶ä»–ä¸Šå±‚åº”ç”¨æä¾›åšå®åŸºç¡€ã€‚

### æ³•å¾‹/åˆè§„å£°æ˜ (Legal Statement)
**è¯·åŠ¡å¿…ä»”ç»†é˜…è¯»ï¼š**

1.  **æŠ€æœ¯ç ”ç©¶æ€§è´¨**: æœ¬é¡¹ç›®æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª **æµè§ˆå™¨è‡ªåŠ¨åŒ–æ¡†æ¶** çš„å®è·µæ¡ˆä¾‹ã€‚æ‰€æœ‰çš„â€œé‡‡é›†â€è¡Œä¸ºå‡åŸºäºæ¨¡æ‹ŸçœŸå®ç”¨æˆ·çš„å¸¸è§„æµè§ˆæ“ä½œï¼ˆç‚¹å‡»ã€æ»šåŠ¨ã€ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œ**ä¸åŒ…å«** ä»»ä½•ç ´è§£åŠ å¯†ç®—æ³•ã€ç»•è¿‡èº«ä»½éªŒè¯æˆ–å…¶ä»–æ”»å‡»ç›®æ ‡æœåŠ¡å™¨å®‰å…¨æœºåˆ¶çš„ä»£ç ã€‚
2.  **æ•°æ®å®‰å…¨**: æœ¬é¡¹ç›®**ä¸æä¾›**ä»»ä½•ç°æˆçš„è´¦å·æˆ– Cookieã€‚ç”¨æˆ·å¿…é¡»é€šè¿‡å®˜æ–¹æ¸ é“ï¼ˆæ‰«ç ï¼‰è¿›è¡Œåˆæ³•ç™»å½•ã€‚é¡¹ç›®ä»…ä½œä¸ºæ•°æ®çš„æœ¬åœ°å¤„ç†å·¥å…·ï¼Œä¸æ”¶é›†ã€ä¸ä¸Šä¼ ä»»ä½•ç”¨æˆ·æ•æ„Ÿä¿¡æ¯ã€‚
3.  **åˆè§„ä½¿ç”¨**: è¯·ä½¿ç”¨è€…ä¸¥æ ¼éµå®ˆã€Šä¸­åäººæ°‘å…±å’Œå›½ç½‘ç»œå®‰å…¨æ³•ã€‹åŠç›®æ ‡ç½‘ç«™çš„ã€Šç”¨æˆ·æœåŠ¡åè®®ã€‹ã€‚ä¸¥ç¦å°†æœ¬é¡¹ç›®ç”¨äºæ•°æ®çˆ¬å–ï¼ˆScrapingï¼‰ã€æ‰¹é‡è´¦å·æ§åˆ¶ï¼ˆBottingï¼‰æˆ–ä»»ä½•ä¾µçŠ¯ä»–äººéšç§/çŸ¥è¯†äº§æƒçš„å•†ä¸šè¡Œä¸ºã€‚
4.  **å…è´£æ¡æ¬¾**: å¼€æºä½œè€…ä¸å¯¹ä»»ä½•å› ä½¿ç”¨æœ¬é¡¹ç›®è€Œå¯¼è‡´çš„æ³•å¾‹çº çº·æˆ–è´¦å·æŸå¤±æ‰¿æ‹…è´£ä»»ã€‚ä»£ç ä»…ä½œä¸ºæŠ€æœ¯äº¤æµç”¨é€”ï¼Œä¸‹è½½åè¯·äº 24 å°æ—¶å†…åˆ é™¤ã€‚

---
*ä»¥æŠ€æœ¯æ¢ç´¢ä¸ºåï¼Œè¡Œå®ˆæ³•åˆè§„ä¹‹äº‹ã€‚*

## ï¿½ è‡´è°¢ (Acknowledgements)

ç‰¹åˆ«æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®ä¸ºæœ¬é¡¹ç›®æä¾›çš„æŠ€æœ¯æ”¯æŒä¸çµæ„Ÿï¼š

*   **[xhshow](https://github.com/Cloxl/xhshow)** by [Cloxl](https://github.com/Cloxl):
    æœ¬é¡¹ç›®ä¸­çš„ Python Agent ç­¾åæœåŠ¡éƒ¨åˆ†æ·±åº¦å€Ÿé‰´å¹¶é›†æˆäº† `xhshow` çš„æ ¸å¿ƒç®—æ³•å®ç°ã€‚`xhshow` æ˜¯ä¸€ä¸ªä¼˜ç§€çš„å¼€æºé¡¹ç›®ï¼Œæä¾›äº†å¯é çš„å°çº¢ä¹¦ Web ç«¯ç­¾åç”Ÿæˆæ–¹æ¡ˆã€‚
    > *Standing on the shoulders of giants.*

## ï¿½ğŸ“„ å¼€æºåè®®
MIT License
